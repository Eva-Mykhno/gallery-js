var P=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var i=(r,e,t)=>(P(r,e,"read from private field"),t?t.call(r):e.get(r)),p=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},L=(r,e,t,s)=>(P(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t);import{a as v,i as c,P as _}from"./assets/vendor-6b9f6847.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}})();var u,g,m;class b{constructor(){p(this,u,"https://api.unsplash.com/search/photos");p(this,g,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");p(this,m,"")}async getPopularImages(e){const t=`${i(this,u)}?query=popular&page=${e}&per_page=12&orientation=portrait&client_id=${i(this,g)}`;try{const{data:s}=await v(t);return s}catch{c.error({message:"something went wrong"})}}async getImagesByQuery(e){const t=`${i(this,u)}?query=${i(this,m)}&page=${e}&per_page=12&orientation=portrait&client_id=${i(this,g)}`;try{const{data:s}=await v(t);return s}catch{c.error({message:"something went wrong"})}}set query(e){L(this,m,e)}}u=new WeakMap,g=new WeakMap,m=new WeakMap;function f(r){return r.map(({urls:e,alt_description:t})=>`<li class='gallery__item'><img src='${e.small}' alt='${t}'></li>`).join("")}const y=document.querySelector(".js-gallery"),h=document.getElementById("tui-pagination-container"),w=document.querySelector(".js-search-form"),I=document.querySelector(".loader"),a=new _(h,{totalItems:0,itemsPerPage:12,visiblePages:5,page:1}),M=a.getCurrentPage(),l=new b;l.getPopularImages(M).then(r=>{const e=f(r.results);a.reset(r.total),y.innerHTML=e});function $(r){const e=r.page;console.log(e),l.getPopularImages(e).then(t=>{const s=f(t.results);y.innerHTML=s})}a.on("afterMove",$);w.addEventListener("submit",r=>{r.preventDefault();const e=r.target.elements.query.value.trim();if(e===""){c.info({message:"enter text"});return}a.off("afterMove",$),l.query=e,a.off("afterMove",q),I.classList.remove("hidden"),l.getImagesByQuery(M).then(t=>{if(t.results.length===0){c.info({message:"No images found"}),h.style.display="none";return}h.style.display="block",c.success({message:`We are found ${t.total} images`});const s=f(t.results);y.innerHTML=s,a.reset(t.total)}).catch(t=>{c.error({message:"something went wrong"})}).finally(()=>{I.classList.add("hidden")}),a.on("afterMove",q),w.reset()});function q(r){const e=r.page;console.log(e),l.getImagesByQuery(e).then(t=>{const s=f(t.results);y.innerHTML=s})}
//# sourceMappingURL=commonHelpers.js.map
