{"version":3,"file":"commonHelpers.js","sources":["../src/js/UnsplashAPI.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nexport class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com/search/photos';\n  #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n  #query = '';\n  async getPopularImages(page) {\n    const url = `${\n      this.#BASE_URL\n    }?query=popular&page=${page}&per_page=12&orientation=portrait&client_id=${\n      this.#API_KEY\n    }`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (error) {\n      iziToast.error({\n        message: 'something went wrong',\n      });\n    }\n  }\n  async getImagesByQuery(page) {\n    const url = `${this.#BASE_URL}?query=${\n      this.#query\n    }&page=${page}&per_page=12&orientation=portrait&client_id=${this.#API_KEY}`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (error) {\n      iziToast.error({\n        message: 'something went wrong',\n      });\n    }\n  }\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n}\n","export function createGalleryCard(images) {\n  return images\n    .map(\n      ({ urls, alt_description }) =>\n        `<li class='gallery__item'><img src='${urls.small}' alt='${alt_description}'></li>`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport { UnsplashAPI } from './js/UnsplashAPI';\nimport { createGalleryCard } from './js/render-function';\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst jsGallery = document.querySelector('.js-gallery');\nconst container = document.getElementById('tui-pagination-container');\nconst formEl = document.querySelector('.js-search-form');\nconst loader = document.querySelector('.loader');\nconst pagination = new Pagination(container, {\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n});\n\nconst page = pagination.getCurrentPage();\n\nconst api = new UnsplashAPI();\napi.getPopularImages(page).then(data => {\n  const markup = createGalleryCard(data.results);\n  pagination.reset(data.total);\n  jsGallery.innerHTML = markup;\n});\nfunction getPopular(event) {\n  const currentPage = event.page;\n  console.log(currentPage);\n  api.getPopularImages(currentPage).then(data => {\n    const markup = createGalleryCard(data.results);\n    jsGallery.innerHTML = markup;\n  });\n}\npagination.on('afterMove', getPopular);\nformEl.addEventListener('submit', event => {\n  event.preventDefault();\n  const searchQuery = event.target.elements.query.value.trim();\n\n  if (searchQuery === '') {\n    iziToast.info({\n      message: 'enter text',\n    });\n    return;\n  }\n  pagination.off('afterMove', getPopular);\n  api.query = searchQuery;\n  pagination.off('afterMove', getByQuery);\n  loader.classList.remove('hidden');\n  api\n    .getImagesByQuery(page)\n    .then(data => {\n      if (data.results.length === 0) {\n        iziToast.info({\n          message: 'No images found',\n        });\n        container.style.display = 'none';\n        return;\n      }\n      container.style.display = 'block';\n      iziToast.success({\n        message: `We are found ${data.total} images`,\n      });\n\n      const markup = createGalleryCard(data.results);\n      jsGallery.innerHTML = markup;\n      pagination.reset(data.total);\n    })\n    .catch(error => {\n      iziToast.error({\n        message: 'something went wrong',\n      });\n    })\n    .finally(() => {\n      loader.classList.add('hidden');\n    });\n\n  pagination.on('afterMove', getByQuery);\n  formEl.reset();\n});\nfunction getByQuery(event) {\n  const currentPage = event.page;\n  console.log(currentPage);\n  api.getImagesByQuery(currentPage).then(data => {\n    const markup = createGalleryCard(data.results);\n    jsGallery.innerHTML = markup;\n  });\n}\n"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","page","url","__privateGet","data","axios","iziToast","newQuery","__privateSet","createGalleryCard","images","urls","alt_description","jsGallery","container","formEl","loader","pagination","Pagination","api","markup","getPopular","event","currentPage","searchQuery","getByQuery","error"],"mappings":"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"}